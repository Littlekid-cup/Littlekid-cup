(window.webpackJsonp=window.webpackJsonp||[]).push([[20],{425:function(s,t,a){"use strict";a.r(t);var n=a(1),r=Object(n.a)({},(function(){var s=this,t=s._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h2",{attrs:{id:"跨域解决方案-jsonp-原理"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#跨域解决方案-jsonp-原理"}},[s._v("#")]),s._v(" 跨域解决方案：jsonp 原理")]),s._v(" "),t("p",[s._v("1.不通过 ajax 请求获取数据")]),s._v(" "),t("p",[s._v("2.script 标签 src 属性，不受同源策略影响")]),s._v(" "),t("p",[s._v("http://111.229.6.231:9996/v1/jsonp")]),s._v(" "),t("p",[s._v("3.前提是后端先做处理，jsonp 接口需要后端用 fn(json)存放数据，前端通过 script 标签的 src 属性加载这段 js.")]),s._v(" "),t("h3",{attrs:{id:"jsonp-优化"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#jsonp-优化"}},[s._v("#")]),s._v(" jsonp 优化")]),s._v(" "),t("p",[s._v("1.button 响应事件，再动态创建 script。")]),s._v(" "),t("p",[s._v("2.获取数据后删除 script。")]),s._v(" "),t("p",[s._v("3.返回指定函数的调用，传回 callback 参数作为调用的函数名")]),s._v(" "),t("p",[s._v("例：src:'http://111.229.6.231:9996/v1/jsonp?callback=user',则返回user({数据})。")]),s._v(" "),t("h3",{attrs:{id:"jq-对-jsonp-的封装"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#jq-对-jsonp-的封装"}},[s._v("#")]),s._v(" jq 对 jsonp 的封装")]),s._v(" "),t("p",[s._v("1.在$({})中指定 dataType 的类型为 jsonp.其他同原来 ajax 请求。其底层原理是通过 script 实现，与 ajax 无关。")]),s._v(" "),t("p",[s._v("$.ajax({")]),s._v(" "),t("p",[s._v("dataType:'jsonp'")]),s._v(" "),t("p",[s._v("})")]),s._v(" "),t("h3",{attrs:{id:"jsonp-缺点"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#jsonp-缺点"}},[s._v("#")]),s._v(" jsonp 缺点")]),s._v(" "),t("p",[s._v("1.只能是 get 请求。")]),s._v(" "),t("p",[s._v("2.实现起来麻烦。")]),s._v(" "),t("h2",{attrs:{id:"跨域解决方案-cors"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#跨域解决方案-cors"}},[s._v("#")]),s._v(" 跨域解决方案：CORS")]),s._v(" "),t("p",[s._v("1.跨域资源共享（CORS）：前提浏览器支持，服务器允许跨域。前端啥都不用干！！")]),s._v(" "),t("div",{staticClass:"language-php line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-php"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 允许所有的域名访问这个接口")]),s._v("\n\nctx"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("set")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string single-quoted-string"}},[s._v("'Access-Control-Allow-Origin'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string single-quoted-string"}},[s._v("'*'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 允许http://www.study.com这个域名访问这个接口")]),s._v("\n\nctx"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("set")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string single-quoted-string"}},[s._v("'Access-Control-Allow-Origin'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string single-quoted-string"}},[s._v("'http://www.study.com'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br")])]),t("h2",{attrs:{id:"跨域解决方案-反向代理"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#跨域解决方案-反向代理"}},[s._v("#")]),s._v(" 跨域解决方案：反向代理")])])}),[],!1,null,null,null);t.default=r.exports}}]);